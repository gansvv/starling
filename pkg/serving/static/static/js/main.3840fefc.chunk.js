(this.webpackJsonpstarlingux=this.webpackJsonpstarlingux||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),r=n(19),c=n.n(r),s=(n(50),n(7)),o=n(9),l=n(3),d=n.n(l),j=n(6),u=n(5),b=n(8),m=n.n(b),h=n(0),p=a.a.createContext({initialized:!1,apps:[],models:[],simulations:[],config:{},metricsStatus:{},initializeData:function(){},getApplication:function(e){},listApplications:function(){},addApplication:function(e){},updateApplication:function(e){},deleteApplication:function(e){},getModel:function(e){},listModels:function(){},addModel:function(e){},updateModel:function(e){},deleteModel:function(e){},importModels:function(e){},getSimulation:function(e){},listSimulations:function(){},addSimulation:function(e){},updateSimulation:function(e){},deleteSimulation:function(e){},startSimulation:function(e){},stopSimulation:function(e){},exportSimulation:function(e){},provisionSimulationDevices:function(e,t){},getConfig:function(){},updateConfig:function(e){},refreshMetricsStatus:function(){}}),x=function(e){var t=Object(i.useState)(!1),n=Object(u.a)(t,2),a=n[0],r=n[1],c=Object(i.useState)([]),s=Object(u.a)(c,2),o=s[0],l=s[1],b=Object(i.useState)([]),x=Object(u.a)(b,2),O=x[0],f=x[1],g=Object(i.useState)([]),v=Object(u.a)(g,2),C=v[0],w=v[1],y=Object(i.useState)(),S=Object(u.a)(y,2),N=S[0],I=S[1],k=Object(i.useState)(),D=Object(u.a)(k,2),T=D[0],R=D[1],A="/webapi",q=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n,i,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat(A,"/target"));case 2:return t=e.sent,e.next=5,m.a.get("".concat(A,"/model"));case 5:return n=e.sent,e.next=8,m.a.get("".concat(A,"/simulation"));case 8:return i=e.sent,e.next=11,m.a.get("".concat(A,"/config"));case 11:return a=e.sent,e.next=14,m.a.get("".concat(A,"/config/metricsStatus"));case 14:c=e.sent,l(t.data),f(n.data),w(i.data),I(a.data),R(c.data),r(!0);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat(A,"/target"));case 2:return t=e.sent,l(t.data),e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("".concat(A,"/target"),t);case 2:return e.next=4,M();case 4:return e.next=6,F();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put("".concat(A,"/target"),t);case 2:return e.next=4,M();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("".concat(A,"/target/").concat(t));case 2:return e.next=4,M();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat(A,"/model"));case 2:return t=e.sent,f(t.data),e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("".concat(A,"/model"),t);case 2:return e.next=4,F();case 4:return e.next=6,H();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put("".concat(A,"/model"),t);case 2:return e.next=4,F();case 4:return e.next=6,H();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("".concat(A,"/model/").concat(t));case 2:return e.next=4,F();case 4:return e.next=6,H();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("".concat(A,"/target/").concat(t,"/import"));case 2:return e.next=4,F();case 4:return e.next=6,H();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat(A,"/simulation"));case 2:return t=e.sent,w(t.data),e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("".concat(A,"/simulation"),t);case 2:return e.next=4,H();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put("".concat(A,"/simulation"),t);case 2:return e.next=4,H();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("".concat(A,"/simulation/").concat(t));case 2:return e.next=4,H();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("".concat(A,"/simulation/").concat(t,"/start"));case 2:return e.next=4,H();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("".concat(A,"/simulation/").concat(t,"/stop"));case 2:return e.next=4,H();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,i,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat(A,"/simulation/").concat(t,"/export"));case 2:n=e.sent,i=window.URL.createObjectURL(new Blob([n.data])),(a=document.createElement("a")).href=i,a.setAttribute("download","loadData-".concat(t,".sh")),document.body.appendChild(a),a.click(),a.remove();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("".concat(A,"/simulation/").concat(t,"/provision"),n);case 2:return e.next=4,H();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put("".concat(A,"/config"),t);case 2:n=e.sent,I(n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat(A,"/config/metricsStatus"));case 2:return t=e.sent,R(t.data),e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(p.Provider,{value:{initialized:a,apps:o,models:O,simulations:C,config:N,metricsStatus:T,initializeData:q,getApplication:function(e){return o.find((function(t){return t.id===e}))},listApplications:M,addApplication:P,updateApplication:z,deleteApplication:G,getModel:function(e){return O.find((function(t){return t.id===e}))},listModels:F,addModel:E,updateModel:U,deleteModel:B,importModels:L,getSimulation:function(e){return C.find((function(t){return t.id===e}))},listSimulations:H,addSimulation:_,updateSimulation:W,deleteSimulation:Y,startSimulation:J,stopSimulation:K,exportSimulation:$,provisionSimulationDevices:X,getConfig:function(){return N},updateConfig:Q,refreshMetricsStatus:V},children:e.children})},O=p,f=(n(71),n(12),n(2));n(35);function g(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}var v=function(e){var t=Object(i.useContext)(O),n="";if(e.simulatedCount===e.connectedCount){var a="All "+g(e.connectedCount)+" devices are connected";n=Object(h.jsx)("span",{className:"status-icon bg-success",title:a})}else{var r=g(e.simulatedCount-e.connectedCount)+" devices are not connected.";n=Object(h.jsx)("span",{className:"status-icon bg-danger",title:r})}"running"!==e.status&&(n=Object(h.jsx)("span",{className:"status-icon bg-gray",title:"No devices are connected."}));var c=t.getModel(e.model),o=c?c.name:e.model;return Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.Col,{children:Object(h.jsxs)(s.b,{to:"/model/".concat(e.model),children:[" ",o," "]})}),Object(h.jsx)(f.n.Col,{children:g(e.provisionedCount)}),Object(h.jsx)(f.n.Col,{children:g(e.simulatedCount)}),Object(h.jsxs)(f.n.Col,{children:[n," ",g(e.connectedCount)]})]})},C=n(43),w=n.n(C),y=n(20),S=n.n(y);n(38);function N(e,t,n){y.store.addNotification({title:t,message:n,type:e,insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:2500,onScreen:!1,pauseOnHover:!0,waitForAnimation:!1,showIcon:!0,click:!0,touch:!0},slidingEnter:{duration:300,timingFunction:"linear",delay:0},slidingExit:{duration:300,timingFunction:"linear",delay:0}})}function I(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}var k=function(e){var t=Object(i.useContext)(O),n=Object(o.g)(),a=e.sim,r=a.devices.reduce((function(e,t){return e+t.provisionedCount}),0),c=a.devices.reduce((function(e,t){return e+t.simulatedCount}),0),l=a.devices.reduce((function(e,t){return e+t.connectedCount}),0),u=c>0?Math.floor(100*l/c):0,b="gray";"running"===a.status&&(100===u?b="green":u>=70&&u<100?b="orange":u<70&&(b="red"));var m="green",p=!1,x=!1,g="",C="";if("ready"===a.status){m="secondary",p=!0,g="Ready";C=Object(h.jsx)("div",{className:"float-left",children:Object(h.jsx)("span",{className:"text-dark",title:"No devices are connected as simulation is not running.",children:Object(h.jsx)(f.h,{prefix:"fe",name:"check"})})})}else if("provisioning"===a.status){m="primary",g="Devices Provisioning";C=Object(h.jsx)("div",{className:"float-left",children:Object(h.jsx)("span",{className:"text-dark",title:"No devices are connected as simulation is not running.",children:Object(h.jsx)(f.h,{prefix:"fe",name:"check"})})})}else if("running"===a.status){if(g="Running",c!==l){m="danger";var y=I(c-l)+" devices are not connected.";C=Object(h.jsx)("div",{className:"float-left",children:Object(h.jsx)("span",{className:"text-danger",title:y,children:Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})})})}else{var S="All "+I(c)+" devices are connected.";C=Object(h.jsx)("div",{className:"float-left",children:Object(h.jsx)("span",{className:"text-success",title:S,children:Object(h.jsx)(f.h,{prefix:"fe",name:"check"})})})}x=!0}else if("deleting"===a.status){m="danger",g="Deleting Simulation";C=Object(h.jsx)("div",{className:"float-left",children:Object(h.jsx)("span",{className:"text-dark",title:"Deleting devices.",children:Object(h.jsx)(f.h,{prefix:"fe",name:"check"})})})}var k="text-"+m,D=a.devices.map((function(e){return Object(h.jsx)(v,{status:a.status,model:e.modelId,provisionedCount:e.provisionedCount,simulatedCount:e.simulatedCount,connectedCount:e.connectedCount},e.modelId)})),T=new Date(Date.parse(a.lastUpdatedTime)),R=w()(T).format("L LTS"),A=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.startSimulation(a.id);case 2:N("success","Success","Simulation '".concat(a.name,"' started."));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.stopSimulation(a.id);case 2:N("success","Success","Simulation '".concat(a.name,"' stopped."));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.exportSimulation(a.id);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N("info","Started","Deleting simulation '".concat(a.name,"'.")),e.next=3,t.deleteSimulation(a.id);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z="ready"!==a.status,G=t.getApplication(a.targetId),F=G?G.name:a.targetId;return Object(h.jsx)("div",{className:"dashboardItem",children:Object(h.jsxs)(f.b,{statusColor:m,className:"dashboardCard",children:[Object(h.jsxs)(f.b.Header,{children:[Object(h.jsx)(f.b.Title,{children:a.name}),Object(h.jsxs)(f.b.Options,{children:[p&&Object(h.jsx)("span",{title:"Start this simulation",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",icon:"play",className:"ml-2",onClick:A,children:"Start"})}),x&&Object(h.jsx)("span",{title:"Stop this simulation",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",icon:"square",className:"ml-2",onClick:q,children:"Stop"})})]})]}),Object(h.jsxs)(f.b.Header,{className:"simToolBar",children:[Object(h.jsx)("span",{title:"Reconfigure this simulation",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",outline:!0,icon:"edit-2",onClick:function(){return n.push("/sim/".concat(a.id))}})}),Object(h.jsx)("span",{title:"Provision devices for this simulation",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",outline:!0,icon:"grid",disabled:z,className:"ml-2",onClick:function(){return n.push("/sim/".concat(a.id,"?provision"))}})}),Object(h.jsx)("span",{title:"Export this simulation as a shell script",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",outline:!0,icon:"share",className:"ml-2",onClick:M})}),Object(h.jsx)("span",{title:"Delete this simulation",children:Object(h.jsx)(f.a,{color:"danger",size:"sm",outline:!0,icon:"trash-2",disabled:z,className:"ml-2",onClick:P})})]}),Object(h.jsxs)(f.b.Body,{children:[Object(h.jsxs)("div",{className:"simProgressCardContainer",children:[Object(h.jsx)("div",{className:"simProgressCardItem",children:Object(h.jsxs)(f.n,{cards:!0,responsive:!0,className:"simFieldsTable",children:[Object(h.jsx)(f.n.Header,{children:Object(h.jsx)(f.n.Row,{children:Object(h.jsx)(f.n.ColHeader,{colSpan:2,children:"Configuration"})})}),Object(h.jsxs)(f.n.Body,{children:[Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.Col,{children:"ID"}),Object(h.jsx)(f.n.Col,{children:Object(h.jsx)(s.b,{to:"/sim/".concat(e.sim.id),children:e.sim.id})})]}),Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.Col,{children:"Target"}),Object(h.jsx)(f.n.Col,{children:Object(h.jsx)(s.b,{to:"/app/".concat(e.sim.targetId),children:F})})]}),Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.Col,{children:"Provisioned Devices"}),Object(h.jsx)(f.n.Col,{children:I(r)})]}),Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.Col,{children:"Telemetry Interval"}),Object(h.jsxs)(f.n.Col,{children:[I(a.telemetryInterval)," ",a.telemetryInterval>1?"secs":"sec"]})]}),Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.Col,{children:"Telemetry Batch Size"}),Object(h.jsx)(f.n.Col,{children:I(a.telemetryBatchSize)})]}),Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.Col,{children:"Telemetry Format"}),Object(h.jsx)(f.n.Col,{children:I(a.telemetryFormat)})]}),Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.Col,{children:"Reported Prop. Interval"}),Object(h.jsxs)(f.n.Col,{children:[I(a.reportedPropertyInterval)," ",a.reportedPropertyInterval>1?"secs":"sec"]})]}),Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.Col,{children:"Wave Groups"}),Object(h.jsx)(f.n.Col,{children:I(a.waveGroupCount)})]}),Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.Col,{children:"Wave Group Interval"}),Object(h.jsxs)(f.n.Col,{children:[I(a.waveGroupInterval)," ",a.waveGroupInterval>1?"secs":"sec"]})]}),Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.Col,{}),Object(h.jsx)(f.n.Col,{})]})]})]})}),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"simProgressCardItem",children:Object(h.jsx)(f.b,{children:Object(h.jsxs)(f.b.Body,{className:"text-center",children:[Object(h.jsx)(f.g,{size:5,children:"Status"}),Object(h.jsx)(f.g,{size:2,className:k,children:g}),Object(h.jsx)("div",{className:"float-right",children:Object(h.jsxs)(f.o,{size:"sm",className:"simProgressTime",children:["Since ",R]})})]})})}),Object(h.jsx)("div",{className:"simProgressCardItem",children:Object(h.jsx)(f.b,{children:Object(h.jsxs)(f.b.Body,{className:"text-center",children:[Object(h.jsx)(f.g,{size:5,children:"Connected Devices"}),Object(h.jsx)(f.g,{size:2,className:"text-dark",children:I(l)}),Object(h.jsx)(f.l,{size:"sm",children:Object(h.jsx)(f.l.Bar,{color:b,width:u})}),C,Object(h.jsx)("div",{className:"float-right",children:Object(h.jsxs)(f.o,{size:"sm",muted:!0,children:[u,"%"]})})]})})})]})]}),Object(h.jsxs)(f.n,{cards:!0,striped:!0,responsive:!0,className:"table-vcenter",children:[Object(h.jsx)(f.n.Header,{children:Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.ColHeader,{children:"Model"}),Object(h.jsx)(f.n.ColHeader,{children:"Provisioned"}),Object(h.jsx)(f.n.ColHeader,{children:"Simulated"}),Object(h.jsx)(f.n.ColHeader,{children:"Connected"})]})}),Object(h.jsx)(f.n.Body,{children:D})]})]})]})})},D=(n(93),function(e){var t=Object(h.jsxs)("span",{className:"text-warning",title:"You need to complete this step.",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"clock"})," Todo"]});return!0===e.statusIsComplete&&(t=Object(h.jsxs)("span",{className:"text-success",title:"You have completed this step.",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"check"})," Done"]})),Object(h.jsxs)(f.b,{children:[Object(h.jsxs)("div",{className:"introImageContainer",children:[Object(h.jsx)("img",{className:"card-img-top",src:e.imgSrc,alt:e.imgAlt}),Object(h.jsx)("div",{className:"introNumber",children:e.introNumber})]}),Object(h.jsxs)(f.b.Body,{className:"d-flex flex-column",children:[Object(h.jsx)("h4",{children:e.title}),Object(h.jsx)("div",{className:"introDescription",children:e.description}),Object(h.jsxs)("div",{className:"d-flex align-items-center pt-5 mt-auto",children:[Object(h.jsx)("div",{children:!e.statusIsComplete&&""!==e.actionName&&Object(h.jsx)("span",{title:e.actionTooltip,children:Object(h.jsxs)(s.b,{to:e.actionUrl,className:"btn btn-sm btn-primary ml-2",children:[Object(h.jsx)(f.h,{prefix:"fe",name:e.actionIcon}),e.actionName]})})}),Object(h.jsx)("div",{className:"ml-auto ",children:Object(h.jsx)("span",{className:"icon d-none d-md-inline-block ml-3 introStatus",children:t})})]})]})]})}),T=function(e){var t=Object(i.useContext)(O);Object(i.useEffect)((function(){t.initialized||t.initializeData()}),[t]);var n=[{stepCompleted:t.models.length>0},{stepCompleted:t.apps.length>0},{stepCompleted:t.simulations.length>0},{stepCompleted:t.simulations.length>0}],a=n.reduce((function(e,t){return e+(t.stepCompleted?0:1)}),0);return Object(h.jsx)(f.b,{children:Object(h.jsxs)(f.b.Body,{children:[Object(h.jsx)("div",{children:Object(h.jsxs)(f.f.Row,{children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.g,{size:3,children:"Get started with Starling in 4 easy steps"})}),Object(h.jsx)(f.f.Col,{children:Object(h.jsx)("div",{className:"float-right",children:Object(h.jsx)(f.o,{size:"sm",children:Object(h.jsxs)("strong",{children:[a," steps remaining"]})})})})]})}),Object(h.jsx)("p",{children:"Starling is a device simulator for IoT Central. Starling can simulate several types of devices sending data at different rates. Several simulations can be executed simultaneously. Complete the steps below to get started."}),Object(h.jsxs)(f.f.Row,{cards:!0,deck:!0,children:[Object(h.jsx)(f.f.Col,{sm:6,xl:3,children:Object(h.jsx)(D,{imgSrc:"./images/intro1.jpg",imgAlt:"Add an IoT Central app",title:"Add an IoT Central app",description:"Devices are created in an IoT Central application. Here you can configure your application credentials.",introNumber:1,actionName:"Add Application",actionIcon:"plus",actionUrl:"/app/add?new&intro",actionTooltip:"Add an IoT Central application",statusIsComplete:n[1].stepCompleted})}),Object(h.jsx)(f.f.Col,{sm:6,xl:3,children:Object(h.jsx)(D,{imgSrc:"./images/intro2.jpg",imgAlt:"Add a Device Model",title:"Add a Device Model",description:Object(h.jsxs)("div",{children:["Device model describes a device using ",Object(h.jsx)("a",{href:"https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md",children:"DTDL"}),". You only need to add device models once, as they can be shared across applications."]}),introNumber:2,actionName:"Add Device Model",actionIcon:"plus",actionUrl:"/model/add?new&intro",actionTooltip:"Add a device model",statusIsComplete:n[0].stepCompleted})}),Object(h.jsx)(f.f.Col,{sm:6,xl:3,children:Object(h.jsx)(D,{imgSrc:"./images/intro3.jpg",imgAlt:"Add a Simulation",title:"Add a Simulation",description:"Add a simulation targeting an IoT Central application. You can simulate several devices per device model, control rates of telemetry etc. per simulation",introNumber:3,actionName:"Add Simulation",actionIcon:"plus",actionUrl:"/sim/add?new&intro",actionTooltip:"Create a new simulation",statusIsComplete:n[2].stepCompleted})}),Object(h.jsx)(f.f.Col,{sm:6,xl:3,children:Object(h.jsx)(D,{imgSrc:"./images/intro4.jpg",imgAlt:"Start Simulation",title:"Start Simulation",description:"Once a simulation is created, you can start the simulation. Devices will be automatically provisioned when the simulation is started.",introNumber:4,actionName:"",actionIcon:"",actionUrl:"",actionTooltip:"Start Simulation",statusIsComplete:n[3].stepCompleted})})]})]})})},R=(n(94),function(e){return Object(h.jsxs)("div",{className:"tableToolbar",children:[Object(h.jsx)("div",{className:"tableToolbarButtons",children:e.children}),Object(h.jsx)("div",{className:"tableToolbarStatus",children:Object(h.jsx)(f.o,{size:"sm",children:e.countMessage})})]})});function A(e,t){if(e){if(e.response&&e.response.data)return e.response.data;if(e.message)return e.message}return t}function q(e){return e?e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"0"}function M(e,t){return e?0===e.length?" no "+t+"s found":1===e.length?" 1 "+t+" found":" "+e.length+" "+t+"s found":" no "+t+"s found"}var P=function(){var e=Object(i.useContext)(O),t=Object(i.useState)(""),n=Object(u.a)(t,2),a=n[0],r=n[1];Object(i.useEffect)((function(){var t=setInterval((function(){e.initialized||e.initializeData(),function(){var t=Object(j.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.listSimulations();case 3:r(""),t.next=11;break;case 6:t.prev=6,t.t0=t.catch(0),"Network Error"===(n=A(t.t0,"error listing simulations"))&&(n+=". Make sure that the Starling server is running."),r(n);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}()()}),5e3);return function(){clearInterval(t)}})),Object(i.useEffect)((function(){try{e.initialized||e.initializeData(),e.config?r(""):r("Make sure that the Starling server is running.")}catch(n){var t=A(n,"error listing simulations");"Network Error"===t&&(t+=". Make sure that the Starling server is running."),r(t)}}),[e]);var c=e.simulations,o=c.map((function(e){return Object(h.jsx)(k,{sim:e},e.id)}));if(e.initialized&&0===c.length)return Object(h.jsx)(f.k.Content,{title:"Welcome to Starling!",children:Object(h.jsx)(T,{})});var l=M(c,"simulation");return Object(h.jsxs)(f.k.Content,{title:"Dashboard",children:[a.length>0&&Object(h.jsxs)("div",{className:"alert alert-danger",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," ",a]}),0===a.length&&Object(h.jsx)(R,{countMessage:l,children:Object(h.jsx)("span",{title:"Create a new simulation",children:Object(h.jsxs)(s.b,{to:"/sim/add?new",className:"btn btn-sm btn-primary",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"plus"}),"New Simulation"]})})}),c&&c.length>0&&Object(h.jsx)("div",{className:"dashboard",children:o})]})},z=(n(95),[{value:"Home",to:"/",icon:"home",LinkComponent:Object(o.j)(s.c),useExact:!0},{value:"Applications",to:"/app",LinkComponent:Object(o.j)(s.c),useExact:!1},{value:"Models",to:"/model",LinkComponent:Object(o.j)(s.c),useExact:!1},{value:"Simulations",to:"/sim",LinkComponent:Object(o.j)(s.c),useExact:!1},{value:"Metrics",to:"/metrics",LinkComponent:Object(o.j)(s.c),icon:"trending-up",useExact:!1},{value:"Settings",to:"/settings",LinkComponent:Object(o.j)(s.c),icon:"settings",useExact:!1}]),G=function(e){var t=Object(i.useState)(!1),n=Object(u.a)(t,2),a=n[0],r=n[1],c=a?"header d-lg-flex p-0 collapse":"header d-lg-flex p-0";return Object(h.jsxs)(i.Fragment,{children:[Object(h.jsx)("div",{className:"header darkHeader",children:Object(h.jsx)(f.c,{className:"",children:Object(h.jsxs)("div",{className:"d-flex",children:[Object(h.jsx)(f.m.Logo,{href:"/",alt:"Starling",src:"/starling-light.png"}),Object(h.jsx)("div",{className:"d-flex order-lg-2 ml-auto",children:Object(h.jsx)(f.j.Item,{type:"div",className:"d-none d-md-flex",children:Object(h.jsx)(f.a,{href:"https://github.com/iot-for-all/starling",target:"_blank",size:"sm",RootComponent:"a",color:"light",icon:"github",children:"Source code"})})}),Object(h.jsx)(f.a,{className:"header-toggler d-lg-none ml-3 ml-lg-0 hamburgerBtn",type:"button",outline:!0,onClick:function(){r(!a)},children:Object(h.jsx)("span",{className:"header-toggler-icon hamburger"})})]})})}),Object(h.jsx)("div",{className:c,children:Object(h.jsx)(f.c,{children:Object(h.jsx)(f.f.Row,{className:"align-items-center",children:Object(h.jsx)(f.f.Col,{className:"col-lg order-lg-first",children:Object(h.jsx)(f.j,{tabbed:!0,className:"border-0 flex-column flex-lg-row",collapse:a,itemsObjects:z})})})})})]})},F=function(e){return Object(h.jsx)(i.Fragment,{children:Object(h.jsx)("footer",{className:"footer",children:Object(h.jsx)(f.c,{children:Object(h.jsxs)(f.f.Row,{className:"align-items-center flex-row-reverse",children:[Object(h.jsx)(f.f.Col,{auto:!0,className:"ml-auto",children:Object(h.jsx)(f.f.Row,{className:"align-items-center",children:Object(h.jsx)(f.f.Col,{auto:!0,children:Object(h.jsxs)(f.i,{className:"list-inline list-inline-dots mb-0",children:[Object(h.jsx)(f.i.Item,{className:"list-inline-item",children:Object(h.jsx)("a",{href:"https://github.com/iot-for-all/starling/blob/main/README.md",target:"_blank",rel:"noopener noreferrer",children:"Documentation"})}),Object(h.jsx)(f.i.Item,{className:"list-inline-item",children:Object(h.jsx)("a",{href:"https://github.com/iot-for-all/starling/issues",children:"Issues"})})]})})})}),Object(h.jsx)(f.f.Col,{width:12,lgAuto:!0,className:"mt-3 mt-lg-0 text-center",children:"Open source Azure IoT Central Device Simulator"})]})})})})},E=(n(96),function(e){return Object(h.jsxs)(f.k,{children:[Object(h.jsxs)(f.k.Main,{className:"pageMain",children:[Object(h.jsx)(G,{}),e.children]}),Object(h.jsx)(F,{})]})}),U=function(){return Object(h.jsx)(E,{children:Object(h.jsx)(P,{})})},B=(n(97),function(e){var t=e.noDataImage?e.noDataImage:"/images/nodata.svg",n=e.actions.map((function(e){return Object(h.jsxs)(s.b,{to:e.actionUrl,className:"btn btn-sm btn-primary mr-2",children:[Object(h.jsx)(f.h,{prefix:"fe",name:e.actionIcon}),e.actionName]},e.actionName)}));return Object(h.jsxs)("div",{className:"empty",children:[Object(h.jsx)("div",{className:"empty-image",children:Object(h.jsx)("img",{src:t,alt:e.message})}),Object(h.jsx)("h5",{children:e.message}),Object(h.jsx)("p",{className:"empty-subtitle ",children:e.description}),e.description2&&Object(h.jsx)("p",{className:"empty-subtitle ",children:e.description2}),Object(h.jsx)("div",{className:"empty-action",children:n})]})}),L=function(){var e=Object(i.useContext)(O);Object(i.useEffect)((function(){e.initialized||e.initializeData()}),[e]);var t=e.apps?e.apps.length:0,n=t>0?"/app/".concat(e.apps[0].id):"";return t>0?Object(h.jsx)(o.a,{to:n}):Object(h.jsx)(E,{children:Object(h.jsx)(f.k.Content,{title:"",children:Object(h.jsx)(B,{message:"IoT Central Applications",description:"IoT Central Applications will show up here. Simulated devices are created in these IoT Central applications.",actions:[{actionName:"Add Application",actionUrl:"/app/add?new",actionIcon:"plus"}],noDataImage:"/images/emptyApps.svg"})})})},H=n(4),_=(n(98),function(e){return Object(h.jsx)(f.b,{className:"listCard",children:Object(h.jsx)(f.b.Body,{children:Object(h.jsx)("div",{className:"my-3 my-md-5 listDetails",children:Object(h.jsx)(f.c,{children:Object(h.jsxs)(f.f.Row,{children:[Object(h.jsxs)(f.f.Col,{md:3,children:[Object(h.jsx)("h4",{className:"mb-5",children:e.listTitle}),Object(h.jsx)("div",{children:Object(h.jsx)(f.i.Group,{children:e.list})})]}),Object(h.jsx)(f.f.Col,{md:9,children:e.detailsForm})]})})})})})}),W=n(10),Y=n(21),J=(n(99),n(39),n(40),function(e){return Object(h.jsx)(Y.a,{content:Object(h.jsx)("div",{className:"helpTooltip",children:e.content}),interactive:!0,interactiveBorder:20,delay:100,placement:e.placement?e.placement:"top",theme:"light-border",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{className:"form-help","data-bs-toggle":"popover","data-bs-placement":"top","data-bs-html":"true","data-bs-original-title":"",title:"",children:"?"}),e.label?e.label:""]})})}),K=function(e){var t=Object(i.useContext)(O),n=Object(i.useState)(e.data),a=Object(u.a)(n,2),r=a[0],c=a[1],s=Object(i.useState)({}),l=Object(u.a)(s,2),b=l[0],m=l[1],p=Object(i.useState)(""),x=Object(u.a)(p,2),g=x[0],v=x[1],C=Object(o.g)(),w=new URLSearchParams(Object(o.h)().search).has("intro");Object(i.useEffect)((function(){c(e.data),m({}),v("")}),[e.data]);var y=function(e){var t=Object(H.a)(Object(H.a)({},r),{},Object(W.a)({},e.target.name,e.target.value));c(t)},S=function(){var n=Object(j.a)(d.a.mark((function n(i){var a,c,s;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.preventDefault(),a={},c=!1,""!==r.id.trim()&&r.id.match(/^[0-9a-z]+$/)||(a.id=!0,c=!0),""===r.name.trim()&&(a.name=!0,c=!0),""===r.appUrl.trim()&&(a.appUrl=!0,c=!0),""===r.appToken.trim()&&(a.appToken=!0,c=!0),""===r.provisioningUrl.trim()&&(a.provisioningUrl=!0,c=!0),""===r.idScope.trim()&&(a.idScope=!0,c=!0),""===r.masterKey.trim()&&(a.masterKey=!0,c=!0),m(a),c){n.next=29;break}if(n.prev=12,s=Object(H.a)({},r),"add"!==e.mode){n.next=20;break}return n.next=17,t.addApplication(s);case 17:N("success","Success","Application '".concat(s.name,"' is added.")),n.next=23;break;case 20:return n.next=22,t.updateApplication(s);case 22:N("success","Success","Application '".concat(s.name,"' is updated."));case 23:w?C.push("/"):C.push("/app/".concat(r.id)),n.next=29;break;case 26:n.prev=26,n.t0=n.catch(12),v(A(n.t0,"error saving application"));case 29:case"end":return n.stop()}}),n,null,[[12,26]])})));return function(e){return n.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,N("info","Started","Importing devices models from '".concat(r.name,"'.")),e.next=5,t.importModels(r.id);case 5:N("success","Success","Devices models are imported from '".concat(r.name,"'.")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),v(A(e.t0,"error importing models"));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,t.deleteApplication(r.id);case 4:N("success","Success","Application '".concat(r.name,"' is deleted.")),C.push("/app"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),v(A(e.t0,"error deleting application"));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),D=e.mode?"add"===e.mode?"Add new application":"Edit application - "+e.data.name:"";return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:e.backendError}),Object(h.jsx)("form",{onSubmit:S,children:Object(h.jsxs)(f.b,{children:[Object(h.jsxs)(f.b.Header,{children:[Object(h.jsx)(f.b.Title,{children:D}),Object(h.jsxs)(f.b.Options,{children:[Object(h.jsx)("span",{title:"Save this application",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",icon:"save",className:"ml-2",onClick:S,children:"Save"})}),"add"===e.mode&&Object(h.jsx)("span",{title:"Cancel all changes",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",className:"ml-2",onClick:function(){return C.push("/app")},children:"Cancel"})})]})]}),"add"!==e.mode&&Object(h.jsxs)(f.b.Header,{className:"simToolBar",children:[Object(h.jsx)("span",{title:"Import all device models from this application",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",outline:!0,icon:"download",onClick:I,children:"Import Device Models"})}),Object(h.jsx)("span",{title:"Delete this application",children:Object(h.jsx)(f.a,{color:"danger",outline:!0,size:"sm",icon:"trash-2",className:"ml-2",onClick:k,children:"Delete"})})]}),Object(h.jsxs)(f.b.Body,{children:[g&&g.length>0&&Object(h.jsxs)("div",{className:"alert alert-danger",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," ",g]}),Object(h.jsx)("p",{children:"Simulated devices are created in an IoT Central application. Create an IoT Central and enter these details so that the devices can be provisioned using the credentials given below. Multiple simulations can be created against an application and executed simultaneously."}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Application ID (E.g: app1)",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"id",value:r.id,onChange:function(e){var t=Object(H.a)(Object(H.a)({},r),{},Object(W.a)({},e.target.name,e.target.value.toLowerCase()));c(t)},disabled:"add"!==e.mode,invalid:!!b.id,feedback:"Application ID is required (only lowercase alphanumeric characters are allowed)"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["Unique ID for the application. Only lowecase alphanumeric characters are allowed. E.g.: ",Object(h.jsx)("strong",{children:"app1"})]}),Object(h.jsx)("p",{children:"Devices in a simulation are named SimID-AppID-ModelID-###."}),"Choose this ID wisely."]})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Application Name",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"name",value:r.name,required:!0,onChange:y,invalid:!!b.name,feedback:"Application Name is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Descriptive name of the IoT Central application."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Application URL",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsxs)(f.e.InputGroup,{children:[Object(h.jsx)(f.e.InputGroupPrepend,{children:Object(h.jsx)(f.e.InputGroupText,{children:"https://"})}),Object(h.jsx)(f.e.Input,{name:"appUrl",value:r.appUrl,required:!0,onChange:y,invalid:!!b.appUrl,feedback:"Application URL is required"})]})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:"URL to access IoT Central application."}),"This is used by the IoT Central API to delete the devices when a simulation is deleted."]})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Application API Token",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"appToken",value:r.appToken,required:!0,onChange:y,invalid:!!b.name,feedback:"Application API Token is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"API Token"})," to access the IoT Central application."]}),Object(h.jsxs)("p",{children:["You can get this from IoT Central application ",Object(h.jsx)("strong",{children:" Administration"})," ",Object(h.jsx)(f.h,{prefix:"fe",name:"arrow-right"})," "," ",Object(h.jsx)("strong",{children:"API Token"})," ",Object(h.jsx)(f.h,{prefix:"fe",name:"arrow-right"})," "," ",Object(h.jsx)("strong",{children:"Generate Token"}),"."]}),"API Token is used to delete devices from IoT Central. Make sure that this token has delete devices permission."]})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Device Provisioning URL",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsxs)(f.e.InputGroup,{children:[Object(h.jsx)(f.e.InputGroupPrepend,{children:Object(h.jsx)(f.e.InputGroupText,{children:"https://"})}),Object(h.jsx)(f.e.Input,{name:"provisioningUrl",value:r.provisioningUrl,required:!0,onChange:y,invalid:!!b.provisioningUrl,feedback:"Device Provisioning URL is required"})]})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:"The endpoint for Device Provisioning Service (DPS)."}),Object(h.jsxs)("p",{children:["Typically it is https://",Object(h.jsx)("strong",{children:"global.azure-devices-provisioning.net"}),"."]}),"Rarely this might be different."]})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"ID Scope",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"idScope",value:r.idScope,required:!0,onChange:y,invalid:!!b.idScope,feedback:"ID Scope is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["The ",Object(h.jsx)("strong",{children:"ID Scope"})," for the IoT Central application."]}),Object(h.jsxs)("p",{children:["You can get it from IoT Central application ",Object(h.jsx)("strong",{children:" Administration"})," ",Object(h.jsx)(f.h,{prefix:"fe",name:"arrow-right"})," "," ",Object(h.jsx)("strong",{children:"Device Connection"})," ",Object(h.jsx)(f.h,{prefix:"fe",name:"arrow-right"})," "," ",Object(h.jsx)("strong",{children:"ID Scope"}),"."]}),"This ID Scope is used during provisioning of simulated devices."]})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Device Connection SAS Key",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"masterKey",value:r.masterKey,required:!0,onChange:y,invalid:!!b.masterKey,feedback:"Device Connection SAS Key is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["The ",Object(h.jsx)("strong",{children:"Device Connection SAS Key"})," for the IoT Central application."]}),Object(h.jsxs)("p",{children:["You can get it from IoT Central application ",Object(h.jsx)("strong",{children:"Administration"})," ",Object(h.jsx)(f.h,{prefix:"fe",name:"arrow-right"})," "," ",Object(h.jsx)("strong",{children:"Device Connection"})," ",Object(h.jsx)(f.h,{prefix:"fe",name:"arrow-right"})," "," ",Object(h.jsx)("strong",{children:"SAS-IoT-Devices"})," ",Object(h.jsx)(f.h,{prefix:"fe",name:"arrow-right"})," "," ",Object(h.jsx)("strong",{children:"Shared access signature (SAS)"})," ",Object(h.jsx)(f.h,{prefix:"fe",name:"arrow-right"})," "," ",Object(h.jsx)("strong",{children:"Primary key"}),"."]}),Object(h.jsx)("p",{children:"This Device Connection SAS Key is used during provisioning of simulated devices."}),"Currently, X509 certificates are not supported in Starling."]})})})]})}),"add"===e.mode&&Object(h.jsx)(f.e.Group,{children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Checkbox,{name:"importModels",label:"Automatically import all Device Models for this application",checked:r.importModels,onChange:function(e){var t=Object(H.a)(Object(H.a)({},r),{},Object(W.a)({},e.target.name,e.target.checked));c(t)}})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:"After adding the application, import all device models in the application."}),"You can always import them after adding the application too."]})})})]})})]})]})})]})},$=function(){var e=Object(i.useContext)(O),t=Object(o.i)(),n=new URLSearchParams(Object(o.h)().search),a=Object(i.useState)(),r=Object(u.a)(a,2),c=r[0],l=r[1],d=Object(i.useState)(""),j=Object(u.a)(d,2),b=j[0],m=j[1],p=t.id,x=Object(o.g)(),g=n.has("new")?"add":"edit";Object(i.useEffect)((function(){e.initialized||e.initializeData()}),[e]),Object(i.useEffect)((function(){if(e.initialized||e.initializeData(),"add"===g)l({id:"",name:"",provisioningUrl:"global.azure-devices-provisioning.net",idScope:"",masterKey:"",appUrl:"",appToken:"",importModels:!0});else if(p){var t=e.getApplication(p);t||x.replace("/app"),l(Object(H.a)({},t))}else l(e.apps[0]);m("")}),[e.apps,p]);var v=M(e.apps,"application"),C=c?e.apps.map((function(e){return Object(h.jsx)(f.i.GroupItem,{className:"d-flex align-items-center",to:"/app/"+e.id,RootComponent:s.b,active:e.id===(null===c||void 0===c?void 0:c.id),action:!0,children:e.name},e.id)})):"",w=c?Object(h.jsx)(K,{data:c,mode:g,backendError:b}):"";return Object(h.jsx)(E,{children:Object(h.jsxs)(f.k.Content,{title:"IoT Central Applications",children:[Object(h.jsx)(R,{countMessage:v,children:Object(h.jsx)("span",{title:"Add an IoT Central Application",children:Object(h.jsxs)(s.b,{to:"/app/add?new",className:"btn btn-sm btn-primary",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"plus"}),"Add New"]})})}),Object(h.jsx)(_,{listTitle:"Applications",list:C,detailsTitle:"Edit Application",detailsForm:w,backendError:b})]})})},X=function(){var e=Object(i.useContext)(O);Object(i.useEffect)((function(){e.initialized||e.initializeData()}),[e]);var t=e.models?e.models.length:0,n=t>0?"/model/".concat(e.models[0].id):"",a=[{actionName:"Add Device Model",actionUrl:"/model/add?new",actionIcon:"plus"}];return e.initialized&&e.apps.length>0&&a.push({actionName:"Import Device Models",actionUrl:"/model/add?import",actionIcon:"download"}),t>0?Object(h.jsx)(o.a,{to:n}):Object(h.jsx)(E,{children:Object(h.jsx)(f.k.Content,{title:"",children:Object(h.jsx)(B,{message:"Device models",description:"Device models will show up here. Simulated devices can be spun up based on these device models. Add a device model here.",actions:a,noDataImage:"/images/emptyModels.svg"})})})},Q=(n(100),function(e){var t=Object(i.useState)(!1),n=Object(u.a)(t,2),a=n[0],r=n[1],c=function(){return r(!1)};return Object(h.jsx)(Y.a,{content:Object(h.jsx)("div",{className:"helpButtonTooltip",children:e.content}),interactive:!0,interactiveBorder:20,delay:100,placement:e.placement?e.placement:"top",theme:"light-border",visible:a,onClickOutside:c,children:Object(h.jsx)("div",{children:Object(h.jsx)(f.a,{type:"button",color:"primary",size:"sm",icon:"info",outline:!0,className:"ml-2",onClick:a?c:function(){return r(!0)},children:e.label?e.label:""})})})}),V=(n(101),function(e){var t=Object(i.useContext)(O),n=Object(i.useState)(e.data),a=Object(u.a)(n,2),r=a[0],c=a[1],s=Object(i.useState)({}),l=Object(u.a)(s,2),b=l[0],m=l[1],p=Object(i.useState)(""),x=Object(u.a)(p,2),g=x[0],v=x[1],C=Object(o.g)(),w=new URLSearchParams(Object(o.h)().search).has("intro");Object(i.useEffect)((function(){e.data.capabilityModel=JSON.stringify(e.data.capabilityModel,null,2),c(e.data),m({}),v("")}),[e.data]);var y=function(e){var t=Object(H.a)(Object(H.a)({},r),{},Object(W.a)({},e.target.name,e.target.value));c(t)},S=function(){var n=Object(j.a)(d.a.mark((function n(i){var a,c,s;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.preventDefault(),a={},c=!1,""!==r.id.trim()&&r.id.match(/^[0-9a-z]+$/)||(a.id=!0,c=!0),""===r.name.trim()&&(a.name=!0,c=!0),""===r.capabilityModel.trim()&&(a.capabilityModel=!0,c=!0),m(a),c){n.next=25;break}if(n.prev=8,s=Object(H.a)(Object(H.a)({},r),{},{capabilityModel:JSON.parse(r.capabilityModel)}),"add"!==e.mode){n.next=16;break}return n.next=13,t.addModel(s);case 13:N("success","Success","Device model '".concat(s.name,"' is added.")),n.next=19;break;case 16:return n.next=18,t.updateModel(s);case 18:N("success","Success","Device model '".concat(s.name,"' is updated."));case 19:w?C.push("/"):C.push("/model/".concat(r.id)),n.next=25;break;case 22:n.prev=22,n.t0=n.catch(8),v(A(n.t0,"error saving model"));case 25:case"end":return n.stop()}}),n,null,[[8,22]])})));return function(e){return n.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,t.deleteModel(r.id);case 4:N("success","Success","Device model '".concat(r.name,"' is deleted.")),C.push("/model"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),v(A(e.t0,"error deleting model"));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),k=e.mode?"add"===e.mode?"Add new device model":"Edit model - "+e.data.name:"";return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:e.backendError}),Object(h.jsx)("form",{onSubmit:S,children:Object(h.jsxs)(f.b,{children:[Object(h.jsxs)(f.b.Header,{children:[Object(h.jsx)(f.b.Title,{children:k}),Object(h.jsxs)(f.b.Options,{children:[Object(h.jsx)("span",{title:"Save this application",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",icon:"save",className:"ml-2",onClick:S,children:"Save"})}),"add"===e.mode&&Object(h.jsx)("span",{title:"Cancel all changes",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",className:"ml-2",onClick:function(){return C.push("/model")},children:"Cancel"})})]})]}),"add"!==e.mode&&Object(h.jsx)(f.b.Header,{className:"simToolBar",children:Object(h.jsx)("span",{title:"Delete this device model",children:Object(h.jsx)(f.a,{color:"danger",size:"sm",outline:!0,icon:"trash-2",type:"button",onClick:I,children:"Delete"})})}),Object(h.jsxs)(f.b.Body,{children:[g&&g.length>0&&Object(h.jsxs)("div",{className:"alert alert-danger",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," ",g]}),Object(h.jsxs)("p",{children:["Device models describe the behavior of a device using ",Object(h.jsx)("a",{href:"https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md",children:"DTDL"})," JSON Model. Simulated devices can be spun up based on these device models. Same model can be used across multiple applications. Make sure that this model exists in the IoT Central application before starting the simulation."]}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Model ID",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"id",value:r.id,onChange:function(e){var t=Object(H.a)(Object(H.a)({},r),{},Object(W.a)({},e.target.name,e.target.value.toLowerCase()));c(t)},disabled:"add"!==e.mode,invalid:!!b.id,feedback:"Model ID is required (only alphanumeric characters are allowed)"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["Unique ID for the model. Only lowecase alphanumeric characters are allowed. E.g.: ",Object(h.jsx)("strong",{children:"mymodel"})]}),Object(h.jsx)("p",{children:"Devices in a simulation are named SimID-AppID-ModelID-###."}),"Choose this ID wisely."]})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Model Name",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"name",value:r.name,required:!0,onChange:y,invalid:!!b.name,feedback:"Model Name is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Descriptive name of the model."})})})]})}),Object(h.jsx)("div",{className:"modelLearnMore",children:Object(h.jsx)(Q,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h6",{children:"DTDL support in Starling"}),Object(h.jsxs)("ol",{className:"helpButton",children:[Object(h.jsxs)("li",{children:[Object(h.jsx)("strong",{children:"Supported data types:"})," boolean, date, datetime, double, duration, float, geopoint, integer, long, string, time."]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("strong",{children:"Unsupported data types:"})," enum, map, object, vector, array, hashmaps, event, state."]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("strong",{children:"Interfaces"})," are supported. ",Object(h.jsx)("strong",{children:"Components"})," are not supported."]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("strong",{children:"Direct methods"})," are acknowledged. They currently do not return any data."]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("strong",{children:"C2D commands"})," are not ",Object(h.jsx)("i",{children:"completed"})," or return any data as response."]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("strong",{children:"Regular devices"})," are supported. ",Object(h.jsx)("strong",{children:"Gateways and Edge devices"})," are not supported."]})]})]}),label:Object(h.jsx)(h.Fragment,{children:"DTDL Support"})})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Capability Model",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Textarea,{name:"capabilityModel",value:r.capabilityModel,onChange:y,className:"capabilityModel",invalid:!!b.capabilityModel,feedback:"Capability Model is required",rows:15})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["Enter a ",Object(h.jsx)("a",{href:"https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md",children:"DTDL"})," JSON Model."]}),"You can get this from IoT Central application ",Object(h.jsx)("strong",{children:" Device Templates"})," ",Object(h.jsx)(f.h,{prefix:"fe",name:"arrow-right"})," "," ",Object(h.jsx)("strong",{children:"Select your model"})," ",Object(h.jsx)(f.h,{prefix:"fe",name:"arrow-right"})," "," ",Object(h.jsx)("strong",{children:"Export"}),"."]})})})]})})]})]})})]})}),Z=function(e){var t=Object(i.useContext)(O),n=Object(i.useState)(""),a=Object(u.a)(n,2),r=a[0],c=a[1],s=Object(i.useState)({}),l=Object(u.a)(s,2),b=l[0],m=l[1],p=Object(i.useState)(""),x=Object(u.a)(p,2),g=x[0],v=x[1],C=Object(o.g)(),w=function(){var e=Object(j.a)(d.a.mark((function e(n){var i,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),i={},a=!1,""===r.trim()&&(i.appId=!0,a=!0),m(i),a){e.next=17;break}return e.prev=6,N("info","Started","Importing devices models from '".concat(r,"'.")),e.next=10,t.importModels(r);case 10:N("success","Success","Devices models are imported from '".concat(r,"'.")),C.push("/model"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),v(A(e.t0,"error importing device models"));case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),y=(t.apps?Array.from(t.apps):[]).map((function(e){return Object(h.jsx)("option",{value:e.id,children:e.name},e.id)}));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:e.backendError}),Object(h.jsx)("form",{onSubmit:w,method:"post",children:Object(h.jsxs)(f.b,{children:[Object(h.jsxs)(f.b.Header,{children:[Object(h.jsx)(f.b.Title,{children:"Import Device Models"}),Object(h.jsxs)(f.b.Options,{children:[Object(h.jsx)("span",{title:"Import Device Models",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",icon:"download",className:"ml-2",type:"submit",children:"Import"})}),Object(h.jsx)("span",{title:"Cancel all changes",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",className:"ml-2",outline:!0,type:"button",onClick:function(){return C.push("/model")},children:"Cancel"})})]})]}),Object(h.jsxs)(f.b.Body,{children:[g&&g.length>0&&Object(h.jsxs)("div",{className:"alert alert-danger",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," ",g]}),Object(h.jsx)("p",{children:"Import all published device models from the application below."}),Object(h.jsx)(f.e.FieldSet,{children:Object(h.jsx)(f.f.Row,{children:Object(h.jsx)(f.f.Col,{colSpan:"2",children:Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Application to import device models",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsxs)(f.e.Select,{name:"appId",value:r,required:!0,onChange:function(e){c(e.target.value)},invalid:!!b.appId,feedback:"Application is required",children:[Object(h.jsx)("option",{value:"",children:"Select one"}),y]})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"The IoT Central application from which the device models are imported."})})})]})})})})})]})]})})]})},ee=function(){var e=Object(i.useContext)(O),t=Object(o.i)(),n=new URLSearchParams(Object(o.h)().search),a=Object(i.useState)(),r=Object(u.a)(a,2),c=r[0],l=r[1],d=Object(i.useState)(""),j=Object(u.a)(d,2),b=j[0],m=j[1],p=t.id,x=Object(o.g)(),g=n.has("new")||n.has("import")?"add":"edit",v=n.has("import");Object(i.useEffect)((function(){e.initialized||e.initializeData()}),[e]),Object(i.useEffect)((function(){if(e.initialized||e.initializeData(),"add"===g)l({id:"",name:"",capabilityModel:[]});else if(p){var t=e.getModel(p);t||x.replace("/model"),l(Object(H.a)({},t))}else l(e.models[0]);m("")}),[e.models,p]);var C=M(e.models,"device model"),w=c?e.models.map((function(e){return Object(h.jsx)(f.i.GroupItem,{className:"d-flex align-items-center",to:"/model/"+e.id,RootComponent:s.b,active:e.id===(null===c||void 0===c?void 0:c.id),action:!0,children:e.name},e.id)})):"",y=c?Object(h.jsx)(V,{data:c,mode:g,backendError:b}):"",S=Object(h.jsx)(Z,{backendError:b}),N=!(!(e.initialized&&e.apps.length>0)||v);return Object(h.jsx)(E,{children:Object(h.jsxs)(f.k.Content,{title:"Device Models",children:[Object(h.jsxs)(R,{countMessage:C,children:[N&&Object(h.jsx)("span",{title:"Add a Device Model",className:"mr-2",children:Object(h.jsxs)(s.b,{to:"/model/add?import",className:"btn btn-sm btn-primary",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"download"}),"Import"]})}),Object(h.jsx)("span",{title:"Add a Device Model",children:Object(h.jsxs)(s.b,{to:"/model/add?new",className:"btn btn-sm btn-primary",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"plus"}),"Add New"]})})]}),Object(h.jsx)(_,{listTitle:"Models",list:w,detailsTitle:"Edit Device Model",detailsForm:v?S:y,backendError:b})]})})},te=function(){var e=Object(i.useContext)(O);Object(i.useEffect)((function(){e.initialized||e.initializeData()}),[e]);var t=e.simulations?e.simulations.length:0,n=t>0?"/sim/".concat(e.simulations[0].id):"",a="Add Simulation",r="/sim/add?new",c="";e.models&&0!==e.models.length?e.apps&&0!==e.apps.length||(a="Add Application",r="/app/add?new",c="You need to add an IoT Central Application before you create a new Simulation."):(a="Add Device Model",r="/model/add?new",c="You need to add a Device Model before you create a new Simulation.");var s=[{actionName:a,actionUrl:r,actionIcon:"plus"}];return t>0?Object(h.jsx)(o.a,{to:n}):Object(h.jsx)(E,{children:Object(h.jsx)(f.k.Content,{title:"",children:Object(h.jsx)(B,{message:"Simulations",description:"Simulations will show up here. Multiple simulations can be concurrently executed against IoT Central applications.",description2:c,actions:s,noDataImage:"/images/emptySimulations.svg"})})})},ne=(n(41),function(e){var t=Object(i.useContext)(O),n=Object(i.useState)(e.data),a=Object(u.a)(n,2),r=a[0],c=a[1],l=Object(i.useState)({}),b=Object(u.a)(l,2),m=b[0],p=b[1],x=Object(i.useState)(""),g=Object(u.a)(x,2),v=g[0],C=g[1],w=Object(o.g)(),y=new URLSearchParams(Object(o.h)().search).has("intro");Object(i.useEffect)((function(){c(e.data),p({}),C("")}),[e.data]),Object(i.useEffect)((function(){if(r&&r.id&&"ready"!==r.status){var e=setInterval((function(){t.listSimulations();var e=t.getSimulation(r.id);c(e)}),5e3);return function(){clearInterval(e)}}}),[r]);var S=function(e){var t=Object(H.a)(Object(H.a)({},r),{},Object(W.a)({},e.target.name,e.target.value));c(t)},I=function(e){if(e.target.value.match(/^[0-9]+$/)||0===e.target.value.trim().length){var t=0;e.target.value.trim().length>0&&(t=+e.target.value);var n=Object(H.a)(Object(H.a)({},r),{},Object(W.a)({},e.target.name,t));c(n)}},k=function(){var n=Object(j.a)(d.a.mark((function n(i){var a,c,s,o,l,j;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(i.preventDefault(),a={},c=!1,""!==r.id.trim()&&r.id.match(/^[0-9a-z]+$/)||(a.id=!0,c=!0),""===r.name.trim()&&(a.name=!0,c=!0),""===r.targetId.trim()&&(a.targetId=!0,c=!0),r.waveGroupCount<=0&&(a.waveGroupCount=!0,c=!0),r.waveGroupInterval<=0&&(a.waveGroupInterval=!0,c=!0),r.telemetryBatchSize<=0&&(a.telemetryBatchSize=!0,c=!0),r.telemetryInterval<=0&&(a.telemetryInterval=!0,c=!0),r.reportedPropertyInterval<=0&&(a.reportedPropertyInterval=!0,c=!0),""===r.disconnectBehavior.trim()&&(a.disconnectBehavior=!0,c=!0),""===r.telemetryFormat.trim()&&(a.telemetryFormat=!0,c=!0),s=0;s<r.devices.length;s++)r.devices[s].simulatedCount<0&&(o="devices[".concat(s,"].simulatedCount"),a[o]=!0,c=!0);if(p(a),c){n.next=39;break}for(n.prev=16,(l=Object(H.a)({},r)).telemetryInterval=+l.telemetryInterval,l.telemetryBatchSize=+l.telemetryBatchSize,l.reportedPropertyInterval=+l.reportedPropertyInterval,l.waveGroupCount=+l.waveGroupCount,l.waveGroupInterval=+l.waveGroupInterval,j=0;j<l.devices.length;j++)l.devices[j].simulatedCount=+l.devices[j].simulatedCount;if("add"!==e.mode){n.next=30;break}return n.next=27,t.addSimulation(l);case 27:N("success","Success","Simulation '".concat(l.name,"' is added.")),n.next=33;break;case 30:return n.next=32,t.updateSimulation(l);case 32:N("success","Success","Simulation '".concat(l.name,"' is updated."));case 33:y?w.push("/"):w.push("/sim/".concat(r.id)),n.next=39;break;case 36:n.prev=36,n.t0=n.catch(16),C(A(n.t0,"error saving simulation"));case 39:case"end":return n.stop()}}),n,null,[[16,36]])})));return function(e){return n.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t.startSimulation(r.id);case 3:N("success","Success","Simulation '".concat(r.name,"' started."));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t.stopSimulation(r.id);case 3:N("success","Success","Simulation '".concat(r.name,"' stopped."));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t.exportSimulation(r.id);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,N("info","Started","Deleting simulation '".concat(r.name,"'.")),e.next=5,t.deleteSimulation(r.id);case 5:w.push("/sim/".concat(r.id)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),C(A(e.t0,"error deleting simulation"));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),P=e.mode?"add"===e.mode?"Add new simulation":"Edit simulation - "+e.data.name:"",z=(t.apps?Array.from(t.apps):[]).map((function(e){return Object(h.jsx)("option",{value:e.id,children:e.name},e.id)})),G=r&&r.devices.map((function(n,i){var a="devices[".concat(i,"]"),o="";if(n.simulatedCount===n.connectedCount){var l="All "+q(n.connectedCount)+" devices are connected";o=Object(h.jsx)("span",{className:"status-icon bg-success",title:l})}else{var d=q(n.simulatedCount-n.connectedCount)+" devices are not connected.";o=Object(h.jsx)("span",{className:"status-icon bg-danger",title:d})}"running"!==r.status&&(o=Object(h.jsx)("span",{className:"status-icon bg-gray",title:"No devices are connected."}));var j="ready"!==r.status,u=t.getModel(n.modelId),b=u?u.name:e.model;return Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.Col,{children:Object(h.jsxs)(s.b,{to:"/model/".concat(n.modelId),children:[" ",b," "]})}),Object(h.jsx)(f.n.Col,{children:q(n.provisionedCount)}),Object(h.jsx)(f.n.Col,{children:Object(h.jsx)(f.e.Input,{name:"".concat(a,".simulatedCount"),value:r.devices[i].simulatedCount,required:!0,type:"text",pattern:"[0-9]*",onChange:function(e){!function(e,t){if(e.target.value.match(/^[0-9]+$/)||0===e.target.value.trim().length){var n=0;e.target.value.trim().length>0&&(n=+e.target.value);var i=Object(H.a)({},r);i.devices[t].simulatedCount=n,c(i)}}(e,i)},disabled:j,invalid:!(!m.devices||!m.devices[i].simulatedCount),feedback:"Simulated devices is required"})}),Object(h.jsxs)(f.n.Col,{children:[o," ",q(n.connectedCount)]}),Object(h.jsx)(f.n.Col,{})]},n.id)})),F="ready"!==r.status,E=r.devices.reduce((function(e,t){return e+t.simulatedCount}),0),U=r.devices.reduce((function(e,t){return e+t.connectedCount}),0),B="Ready",L="green";"ready"===r.status?(L="secondary",B="Ready"):"provisioning"===r.status?(L="primary",B="Devices Provisioning"):"running"===r.status?(B="Running",E!==U&&(L="danger")):"deleting"===r.status&&(B="Deleting",L="danger");var _="text-"+L;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:e.backendError}),Object(h.jsx)("form",{onSubmit:k,children:Object(h.jsxs)(f.b,{children:[Object(h.jsxs)(f.b.Header,{children:[Object(h.jsx)(f.b.Title,{children:P}),Object(h.jsx)(f.b.Options,{children:Object(h.jsx)("span",{title:"Save this simulation",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",icon:"save",disabled:F,className:"ml-2",type:"submit",children:"Save"})})})]}),"add"!==e.mode&&Object(h.jsxs)(f.b.Header,{className:"simToolBar",children:["ready"===r.status&&Object(h.jsx)("span",{title:"Start this simulation",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",icon:"play",type:"button",onClick:D,children:"Start"})}),"running"===r.status&&Object(h.jsx)("span",{title:"Stop this simulation",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",icon:"square",type:"button",onClick:T,children:"Stop"})}),Object(h.jsx)("span",{title:"Provision devices for this simulation",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",outline:!0,icon:"grid",disabled:F,type:"button",className:"ml-2",onClick:function(){return w.push("/sim/".concat(r.id,"?provision"))},children:"Provision"})}),Object(h.jsx)("span",{title:"Export this simulation as a shell script",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",outline:!0,icon:"share",disabled:"add"===e.mode,type:"button",className:"ml-2",onClick:R,children:"Export"})}),Object(h.jsx)("span",{title:"Delete this simulation",children:Object(h.jsx)(f.a,{color:"danger",size:"sm",outline:!0,icon:"trash-2",disabled:F,className:"ml-2",type:"button",onClick:M,children:"Delete"})}),Object(h.jsxs)("div",{className:"card-options mr-2",children:[Object(h.jsxs)("div",{className:"text-dark",children:["Status:"," "]}),Object(h.jsx)("div",{className:_,children:B})]})]}),Object(h.jsxs)(f.b.Body,{children:[v&&v.length>0&&Object(h.jsxs)("div",{className:"alert alert-danger",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," ",v]}),Object(h.jsx)("p",{children:"Configure a simulation using the parameters below. Simulations cannot be updated when they are running. Devices are automatically provisioned when a simulation is started and these devices are reused in future executions of this simulation. However, you can explicitly provision or de-provision ahead of time."}),Object(h.jsxs)(f.f.Row,{children:[Object(h.jsx)(f.f.Col,{children:F&&Object(h.jsxs)(f.o,{className:"text-default small",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," "," Simulation cannot be updated when it is busy."]})}),Object(h.jsx)(f.f.Col,{children:Object(h.jsx)("div",{className:"simLearnMore",children:Object(h.jsx)("a",{href:"https://github.com/iot-for-all/starling",target:"_blank",rel:"noreferrer",children:"Help me configure this simulation"})})})]}),Object(h.jsxs)(f.e.FieldSet,{children:[Object(h.jsxs)(f.f.Row,{children:[Object(h.jsxs)(f.f.Col,{children:[Object(h.jsx)("h4",{children:"Base Configuration"}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Simulation ID (E.g.: sim1)",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"id",value:r.id,type:"text",onChange:function(e){var t=Object(H.a)(Object(H.a)({},r),{},Object(W.a)({},e.target.name,e.target.value.toLowerCase()));c(t)},disabled:"add"!==e.mode,invalid:!!m.id,feedback:"Simulation ID is required (only lowercase alphanumeric characters are allowed)"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["Unique ID for the simulation. Only lowecase alphanumeric characters are allowed. E.g.: ",Object(h.jsx)("strong",{children:"sim1"})]}),Object(h.jsx)("p",{children:"Devices in a simulation are named SimID-AppID-ModelID-###."}),"Choose this ID wisely."]})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Simulation Name",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"name",value:r.name,required:!0,onChange:S,disabled:F,invalid:!!m.name,feedback:"Simulation Name is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Name of the Simulation that is shown everywhere."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Target Application",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsxs)(f.e.Select,{name:"targetId",value:r.targetId,required:!0,onChange:S,disabled:"add"!==e.mode,invalid:!!m.targetId,feedback:"Target Application is required",children:[Object(h.jsx)("option",{value:"",children:"Select one"}),z]})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"The IoT Central application in which the simulated devices are created."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Device Disconnect Behavior",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsxs)(f.e.Select,{name:"disconnectBehavior",value:r.disconnectBehavior,required:!0,onChange:S,disabled:F,invalid:!!m.disconnectBehavior,feedback:"Device Disconnect Behavior is required",children:[Object(h.jsx)("option",{value:"never",children:"Never Disconnect"}),Object(h.jsx)("option",{value:"telemetry",children:"After Sending Telemetry"})]})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["Select ",Object(h.jsx)("strong",{children:"Never Disconnect"})," if you want your devices to be connected always. Use this for a typical IoT device."]}),"Select ",Object(h.jsx)("strong",{children:"After Sending Telemetry"})," if you want your devices to be disconnected after sending each telemetry batch. Use this for simulating occasionally connected devices."]})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Telemetry Format",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsxs)(f.e.Select,{name:"telemetryFormat",value:r.telemetryFormat,required:!0,onChange:S,disabled:F,invalid:!!m.telemetryFormat,feedback:"Telemetry Format is required",children:[Object(h.jsx)("option",{value:"default",children:"Default (JSON)"}),Object(h.jsx)("option",{value:"opcua",children:"OPCUA (JSON)"})]})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["Select ",Object(h.jsx)("strong",{children:"Default"})," for a typical IoT device."]}),"Select ",Object(h.jsx)("strong",{children:"OPCUA"})," for sending data in OPCUA format. This is used for Industrial IoT (IIoT) devices."]})})})]})})]}),Object(h.jsxs)(f.f.Col,{children:[Object(h.jsx)("h4",{children:"Data Rates"}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Telemetry Interval (secs)",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"telemetryInterval",value:r.telemetryInterval,required:!0,type:"text",pattern:"[0-9]*",onChange:I,disabled:F,invalid:!!m.telemetryInterval,feedback:"Telemetry Interval (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Enter how often telemetry is sent from the device to IoT Central."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Telemetry Batch Size",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"telemetryBatchSize",value:r.telemetryBatchSize,required:!0,type:"text",pattern:"[0-9]*",onChange:I,disabled:F,invalid:!!m.telemetryBatchSize,feedback:"Telemetry Batch Size (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Number of telemetry messages to be sent everytime 'Telemetry Batch Size' seconds."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Reported Property Interval (secs)",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"reportedPropertyInterval",value:r.reportedPropertyInterval,required:!0,type:"text",pattern:"[0-9]*",onChange:I,disabled:F,invalid:!!m.reportedPropertyInterval,feedback:"Reported Property Interval (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Enter how often reported properties are sent from the device to IoT Central."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Wave Group Count",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"waveGroupCount",value:r.waveGroupCount,required:!0,type:"text",pattern:"[0-9]*",onChange:I,disabled:F,invalid:!!m.waveGroupCount,feedback:"Wave Group Count (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:"Devices can be divided into several number of waves. Telemetry is sent sequentially from devices in one wave after another."}),Object(h.jsxs)("p",{children:["For a simple simulation, set it to ",Object(h.jsx)("strong",{children:"1"}),"."]}),"Say, if you want to divide your fleet of devices into 2 waves, 30 seconds apart, set ",Object(h.jsx)("strong",{children:"Wave Group Count"})," as ",Object(h.jsx)("strong",{children:"2"})," and ",Object(h.jsx)("strong",{children:"Wave Group Interval"})," as ",Object(h.jsx)("strong",{children:"30"}),"."]})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Wave Group Interval (secs)",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"waveGroupInterval",value:r.waveGroupInterval,required:!0,type:"text",pattern:"[0-9]*",onChange:I,disabled:F,invalid:!!m.waveGroupInterval,feedback:"Wave Group Interval (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:"Interval between each wave group."}),Object(h.jsxs)("p",{children:["If the ",Object(h.jsx)("strong",{children:"Wave Group Count"})," is set as ",Object(h.jsx)("strong",{children:"1"}),", you can leave ",Object(h.jsx)("strong",{children:"Wave Group Interval"})," as ",Object(h.jsx)("strong",{children:"1"}),"."]}),"Say, if you want to divide your fleet of devices into 2 waves, 30 seconds apart, set ",Object(h.jsx)("strong",{children:"Wave Group Count"})," as ",Object(h.jsx)("strong",{children:"2"})," and ",Object(h.jsx)("strong",{children:"Wave Group Interval"})," as ",Object(h.jsx)("strong",{children:"30"}),"."]})})})]})})]})]}),Object(h.jsx)(f.f.Row,{children:Object(h.jsxs)(f.f.Col,{colSpan:"2",children:[Object(h.jsx)("h4",{children:"Simulated Devices"}),Object(h.jsxs)(f.o,{className:"small",children:["Devices are automatically provisioned in IoT Central when the simulation is started. These devices are reused whenever this simulation is executed. You can add/delete provisioned devices using the Provision button above. All provisioned devices will be deleted when simulation is deleted.",Object(h.jsx)("p",{}),Object(h.jsx)(f.o,{className:"text-default",children:Object(h.jsxs)("strong",{children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," "," Provisioned devices in IoT Central will be billed to your Azure subscription."]})})]}),Object(h.jsxs)(f.n,{cards:!0,striped:!0,responsive:!0,className:"table-vcenter fillerTable",children:[Object(h.jsx)(f.n.Header,{children:Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.ColHeader,{children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:"Model"}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Devices of this type are simulated."}),placement:"bottom"})})]})}),Object(h.jsx)(f.n.ColHeader,{children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:"Provisioned"}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Number of devices currently provisioned for this simulation."}),placement:"bottom"})})]})}),Object(h.jsx)(f.n.ColHeader,{children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:"Simulated"}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Number of devices requested to be simulated."}),placement:"bottom"})})]})}),Object(h.jsx)(f.n.ColHeader,{children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:"Connected"}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Number of devices currently connected for this simulation."}),placement:"bottom"})})]})}),Object(h.jsx)(f.n.ColHeader,{})]})}),Object(h.jsx)(f.n.Body,{children:G})]})]})})]})]})]})})]})}),ie=function(e){var t=Object(i.useContext)(O),n=Object(i.useState)(e.data),a=Object(u.a)(n,2),r=a[0],c=a[1],s=Object(i.useState)({}),l=Object(u.a)(s,2),b=l[0],m=l[1],p=Object(i.useState)(""),x=Object(u.a)(p,2),g=x[0],v=x[1],C=Object(o.g)();Object(i.useEffect)((function(){c(e.data),m({}),v("")}),[e.data]);var w=function(){var e=Object(j.a)(d.a.mark((function e(n){var i,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n.preventDefault(),!1,m({}),e.prev=5,i=Object(H.a)({},r),a=0;a<i.devices.length;a++)i.devices[a].provisionedCount=+i.devices[a].provisionedCount;return e.next=10,t.provisionSimulationDevices(i.id,i.devices);case 10:N("info","Started","Provisioning devices for simulation '".concat(i.name,"'.")),C.push("/sim/".concat(r.id)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),v(A(e.t0,"error provisioning devices"));case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}(),y="Provision devices - "+r.name,S=r&&r.devices.map((function(e,t){var n="devices[".concat(t,"]");return Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.Col,{children:e.modelId}),Object(h.jsx)(f.n.Col,{children:Object(h.jsx)(f.e.Input,{name:"".concat(n,".provisionedCount"),value:r.devices[t].provisionedCount,required:!0,type:"number",onChange:function(e){!function(e,t){var n=Object(H.a)({},r);n.devices[t].provisionedCount=e.target.value,c(n)}(e,t)},invalid:!(!b.devices||!b.devices[t].provisionedCount),feedback:"Provisioned devices is required"})}),Object(h.jsx)(f.n.Col,{})]},e.id)}));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:e.backendError}),Object(h.jsx)("form",{onSubmit:w,method:"post",children:Object(h.jsxs)(f.b,{children:[Object(h.jsxs)(f.b.Header,{children:[Object(h.jsx)(f.b.Title,{children:y}),Object(h.jsxs)(f.b.Options,{children:[Object(h.jsx)("span",{title:"Provision devices for this simulation",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",icon:"grid",className:"ml-2",type:"submit",children:"Provision"})}),Object(h.jsx)("span",{title:"Cancel all changes",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",className:"ml-2",outline:!0,type:"button",onClick:function(){return C.push("/sim/"+r.id)},children:"Cancel"})})]})]}),Object(h.jsxs)(f.b.Body,{children:[g&&g.length>0&&Object(h.jsxs)("div",{className:"alert alert-danger",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," ",g]}),Object(h.jsx)("p",{children:"Provision devices for this simulation. Devices can either be added or removed by increasing or decreasing the numbers below."}),Object(h.jsx)(f.e.FieldSet,{children:Object(h.jsx)(f.f.Row,{children:Object(h.jsxs)(f.f.Col,{colSpan:"2",children:[Object(h.jsx)("h4",{children:"Provision Devices Count"}),Object(h.jsxs)(f.o,{className:"small",children:["Devices are provisioned in IoT Central for the given model below. All provisioned devices will be deleted when simulation is deleted.",Object(h.jsx)("p",{}),Object(h.jsx)(f.o,{className:"text-default",children:Object(h.jsxs)("strong",{children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," "," Provisioned devices in IoT Central will be billed to your Azure subscription."]})})]}),Object(h.jsxs)(f.n,{cards:!0,striped:!0,responsive:!0,className:"table-vcenter fillerTable",children:[Object(h.jsx)(f.n.Header,{children:Object(h.jsxs)(f.n.Row,{children:[Object(h.jsx)(f.n.ColHeader,{children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:"Model"}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Devices of this type are simulated."}),placement:"bottom"})})]})}),Object(h.jsx)(f.n.ColHeader,{children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:"Device Count"}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Number of devices to be provisioned for this simulation."}),placement:"bottom"})})]})}),Object(h.jsx)(f.n.ColHeader,{})]})}),Object(h.jsx)(f.n.Body,{children:S})]})]})})})]})]})})]})},ae=function(){var e=Object(i.useContext)(O),t=Object(o.i)(),n=new URLSearchParams(Object(o.h)().search),a=Object(i.useState)(),r=Object(u.a)(a,2),c=r[0],l=r[1],d=Object(i.useState)(""),j=Object(u.a)(d,2),b=j[0],m=j[1],p=t.id,x=Object(o.g)(),g=n.has("new")?"add":"edit",v=n.has("provision");Object(i.useEffect)((function(){e.initialized||e.initializeData()}),[e]),Object(i.useEffect)((function(){if(e.initialized||e.initializeData(),"add"===g){for(var t=[],n=0;n<e.models.length;n++)t.push({id:e.models[n].id,modelId:e.models[n].id,provisionedCount:0,simulatedCount:0,connectedCount:0});l({id:"",name:"",targetId:"",status:"ready",waveGroupCount:1,waveGroupInterval:1,telemetryBatchSize:1,telemetryInterval:120,reportedPropertyInterval:14400,disconnectBehavior:"never",telemetryFormat:"default",devices:t})}else if(p){var i=e.getSimulation(p);i||x.replace("/sim"),l(Object(H.a)({},i))}else l(e.simulations[0]);m("")}),[e.simulations,p]);var C=M(e.simulations,"simulation");if(!e.models||0===e.models.length||!e.apps||0===e.apps.length)return Object(h.jsx)(o.a,{to:"/sim"});var w=c?e.simulations.map((function(e){return Object(h.jsx)(f.i.GroupItem,{className:"d-flex align-items-center",to:"/sim/"+e.id,RootComponent:s.b,active:e.id===(null===c||void 0===c?void 0:c.id),action:!0,children:e.name},e.id)})):"",y=c?Object(h.jsx)(ne,{data:c,mode:g,backendError:b}):"",S=c?Object(h.jsx)(ie,{data:c,backendError:b}):"";return Object(h.jsx)(E,{children:Object(h.jsxs)(f.k.Content,{title:"Simulations",children:[Object(h.jsx)(R,{countMessage:C,children:Object(h.jsx)("span",{title:"Add a Simulation",children:Object(h.jsxs)(s.b,{to:"/sim/add?new",className:"btn btn-sm btn-primary",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"plus"}),"Add New"]})})}),Object(h.jsx)(_,{listTitle:"Simulations",list:w,detailsTitle:"Edit Application",detailsForm:v?S:y,backendError:b})]})})},re=(n(102),function(){var e=Object(i.useContext)(O),t=Object(o.g)(),n=Object(i.useState)(),a=Object(u.a)(n,2),r=a[0],c=a[1],s=Object(i.useState)({}),l=Object(u.a)(s,2),b=l[0],m=l[1],p=Object(i.useState)(""),x=Object(u.a)(p,2),g=x[0],v=x[1],C=Object(i.useState)(!1),w=Object(u.a)(C,2),y=w[0],S=w[1],I=Object(i.useState)(!1),k=Object(u.a)(I,2),D=k[0],T=k[1],R=Object(i.useState)(!1),q=Object(u.a)(R,2),M=q[0],P=q[1];Object(i.useEffect)((function(){if(e.initialized||e.initializeData(),e.config){var t=Object(H.a)({},e.config);if(t.data=Object(H.a)({},e.config.data),t.http=Object(H.a)({},e.config.http),t.logger=Object(H.a)({},e.config.logger),t.simulation=Object(H.a)({},e.config.simulation),t.simulation.geopointData){for(var n="[\n",i=0;i<t.simulation.geopointData.length;i++)n+="  ["+t.simulation.geopointData[i][0]+", "+t.simulation.geopointData[i][1]+", "+t.simulation.geopointData[i][2]+"]",i<t.simulation.geopointData.length-1?n+=",\n":n+="\n";n+="]",t.simulation.geopointData=n}c(t),v("")}else v("Failed to get settings. Make sure that the Starling server is running.")}),[e.config]);var z=function(e){var t=Object(H.a)(Object(H.a)({},r.simulation),{},Object(W.a)({},e.target.name,e.target.checked)),n=Object(H.a)(Object(H.a)({},r),{},{simulation:t});c(n),S(!0),P(!1)},G=function(e){var t=Object(H.a)(Object(H.a)({},r.logger),{},Object(W.a)({},e.target.name,e.target.value)),n=Object(H.a)(Object(H.a)({},r),{},{logger:t});c(n),T(!0),P(!1)},F=function(e){if(e.target.value.match(/^[0-9]+$/)||0===e.target.value.trim().length){var t=0;e.target.value.trim().length>0&&(t=+e.target.value);var n=Object(H.a)(Object(H.a)({},r.simulation),{},Object(W.a)({},e.target.name,t)),i=Object(H.a)(Object(H.a)({},r),{},{simulation:n});c(i),S(!0),P(!1)}},U=function(e){if(e.target.value.match(/^[0-9]+$/)||0===e.target.value.trim().length){var t=0;e.target.value.trim().length>0&&(t=+e.target.value);var n=Object(H.a)(Object(H.a)({},r.http),{},Object(W.a)({},e.target.name,t)),i=Object(H.a)(Object(H.a)({},r),{},{http:n});c(i),T(!0),P(!1)}},B=function(){var n=Object(j.a)(d.a.mark((function n(i){var a,c,s,o,l;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.preventDefault(),a={},c=!1,r.simulation.connectionTimeout<=0&&(a.connectionTimeout=!0,c=!0),r.simulation.telemetryTimeout<=0&&(a.telemetryTimeout=!0,c=!0),r.simulation.twinUpdateTimeout<=0&&(a.twinUpdateTimeout=!0,c=!0),r.simulation.commandTimeout<=0&&(a.commandTimeout=!0,c=!0),r.simulation.registrationAttemptTimeout<=0&&(a.registrationAttemptTimeout=!0,c=!0),r.simulation.maxConcurrentConnections<=0&&(a.maxConcurrentConnections=!0,c=!0),r.simulation.maxConcurrentTwinUpdates<=0&&(a.maxConcurrentTwinUpdates=!0,c=!0),r.simulation.maxConcurrentRegistrations<=0&&(a.maxConcurrentRegistrations=!0,c=!0),r.simulation.maxConcurrentDeletes<=0&&(a.maxConcurrentDeletes=!0,c=!0),r.simulation.maxRegistrationAttempts<=0&&(a.maxRegistrationAttempts=!0,c=!0),""===r.simulation.geopointData.trim()&&(a.geopointData=!0,c=!0),r.http.adminPort<=0&&(a.adminPort=!0,c=!0),r.http.metricsPort<=0&&(a.maxConcurrentRegistrations=!0,c=!0),0===r.logger.logsDir.trim().length&&(a.logsDir=!0,c=!0),0===r.data.path.trim().length&&(a.logsDir=!0,c=!0),m(a),c){n.next=38;break}n.prev=20,s=Object(H.a)({},r),o=!1;try{s.simulation.geopointData=JSON.parse(s.simulation.geopointData)}catch(d){v("Error parsing Geopoint Data: "+A(d,"error parsing JSON")),o=!0}if(o){n.next=33;break}return n.next=27,e.updateConfig(s);case 27:l="Configuration is updated.",y&&(l+=" Restart simulations."),D&&(l+=" Restart Starling server."),N("success","Success",l),P(!0),t.replace("/settings");case 33:n.next=38;break;case 35:n.prev=35,n.t0=n.catch(20),v(A(n.t0,"error saving configuration"));case 38:case"end":return n.stop()}}),n,null,[[20,35]])})));return function(e){return n.apply(this,arguments)}}();return Object(h.jsx)(E,{children:Object(h.jsxs)(f.k.Content,{title:"Settings",children:[g&&g.length>0&&Object(h.jsxs)("div",{className:"alert alert-danger",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," ",g]}),y&&M&&Object(h.jsxs)("div",{className:"alert alert-warning",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," ","Some of the simulation level settings are changed. Restart simulations to apply changes."]}),D&&M&&Object(h.jsxs)("div",{className:"alert alert-warning",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," ","Some of the application level settings are changed. Restart Starling server to apply changes."]}),r&&Object(h.jsx)("form",{onSubmit:B,children:Object(h.jsxs)(f.b,{children:[Object(h.jsxs)(f.b.Header,{children:[Object(h.jsx)(f.b.Title,{children:"Starling Configuration"}),Object(h.jsx)(f.b.Options,{children:Object(h.jsx)("span",{title:"Save this configuration",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",icon:"save",className:"ml-2",onClick:B,children:"Save"})})})]}),Object(h.jsxs)(f.b.Body,{children:[Object(h.jsx)("p",{children:"Configure Starling server using the following settings."}),Object(h.jsx)(f.e.FieldSet,{children:Object(h.jsxs)(f.f.Row,{children:[Object(h.jsxs)(f.f.Col,{children:[Object(h.jsx)("h6",{children:Object(h.jsx)(f.o,{className:"text-default small",children:Object(h.jsxs)("strong",{children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," "," Restart simulations to apply these changes."]})})}),Object(h.jsx)("h4",{children:"Simulation Settings"}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Connection Timeout (ms)",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"connectionTimeout",value:r.simulation.connectionTimeout,required:!0,type:"text",pattern:"[0-9]*",onChange:F,invalid:!!b.connectionTimeout,feedback:"Connection Timeout (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Timeout in milliseconds for device connection."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Telemetry Timeout (ms)",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"telemetryTimeout",value:r.simulation.telemetryTimeout,required:!0,type:"text",pattern:"[0-9]*",onChange:F,invalid:!!b.telemetryTimeout,feedback:"Telemetry Timeout (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Timeout in milliseconds for sending telemetry."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Twin Update Timeout (ms)",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"twinUpdateTimeout",value:r.simulation.twinUpdateTimeout,required:!0,type:"text",pattern:"[0-9]*",onChange:F,invalid:!!b.twinUpdateTimeout,feedback:"Twin Update Timeout (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Timeout in milliseconds for updating device twin. This is used for acknowledging desired property changes or sending reported properties."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Command Timeout (ms)",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"commandTimeout",value:r.simulation.commandTimeout,required:!0,type:"text",pattern:"[0-9]*",onChange:F,invalid:!!b.commandTimeout,feedback:"Command Timeout (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Timeout in milliseconds for acknowledging commands."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Provisioning Timeout (ms)",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"registrationAttemptTimeout",value:r.simulation.registrationAttemptTimeout,required:!0,type:"text",pattern:"[0-9]*",onChange:F,invalid:!!b.registrationAttemptTimeout,feedback:"Registration Timeout (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Timeout in milliseconds for provisioning a device in Device Provisioning Service (DPS)."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Max. Concurrent Telemetry",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"maxConcurrentConnections",value:r.simulation.maxConcurrentConnections,required:!0,type:"text",pattern:"[0-9]*",onChange:F,invalid:!!b.maxConcurrentConnections,feedback:"Max. Concurrent Telemetry (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Maximum number of devices to send telemetry at a time. You can simulate large number of devices (say 1,000) at any time, but concurrently this many (say 100) devices will send telemetry at the same instant."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Max. Concurrent Twin Updates",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"maxConcurrentConnections",value:r.simulation.maxConcurrentTwinUpdates,required:!0,type:"text",pattern:"[0-9]*",onChange:F,invalid:!!b.maxConcurrentTwinUpdates,feedback:"Max. Concurrent Twin Updates (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Maximum number of devices to send reported properties at a time. You can simulate large number of devices (say 1,000) at any time, but concurrently this many (say 100) devices will send reported properties at the same instant."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Max. Concurrent Device Registrations",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"maxConcurrentRegistrations",value:r.simulation.maxConcurrentRegistrations,required:!0,type:"text",pattern:"[0-9]*",onChange:F,invalid:!!b.maxConcurrentRegistrations,feedback:"Max. Concurrent Device Registrations (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Maximum number of devices to be provisioned at a time. Keep this number low as Device Provisioning Service (DPS) will throttle."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Max. Concurrent Device Deletes",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"maxConcurrentDeletes",value:r.simulation.maxConcurrentDeletes,required:!0,type:"text",pattern:"[0-9]*",onChange:F,invalid:!!b.maxConcurrentDeletes,feedback:"Max. Concurrent Device Deletes (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Maximum number of devices to be deleted at a time. Devices are deleted when the simulation is deleted or the provisioned count in a simulation is decreased."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Max. Registration Attempts",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"maxRegistrationAttempts",value:r.simulation.maxRegistrationAttempts,required:!0,type:"text",pattern:"[0-9]*",onChange:F,invalid:!!b.maxRegistrationAttempts,feedback:"Max. Registration Attempts (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"Maximum number of times a device can attempt for registration before erroring out."})})})]})}),Object(h.jsx)(f.e.Group,{children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Checkbox,{name:"enableTelemetry",label:"Send Telemetry",checked:r.simulation.enableTelemetry,onChange:z})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:"Should telemetry be sent from the device?"}),"If this setting is turned off, no devices will send any telemetry."]})})})]})}),Object(h.jsx)(f.e.Group,{children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Checkbox,{name:"enableReportedProps",label:"Send Reported Properties",checked:r.simulation.enableReportedProps,onChange:z})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:"Should reported properties be sent from the device?"}),"If this setting is turned off, no devices will send any reported properties."]})})})]})}),Object(h.jsx)(f.e.Group,{children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Checkbox,{name:"enableTwinUpdateAcks",label:"Send Desired Property Acknowledgements",checked:r.simulation.enableTwinUpdateAcks,onChange:z})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:"When the device receives a desired property update, should reported properties be sent from the device?"}),"If this setting is turned off, no devices will send any reported property acknowledgements for desired property updates."]})})})]})}),Object(h.jsx)(f.e.Group,{children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Checkbox,{name:"enableCommandAcks",label:"Send Command Acknowedgements",checked:r.simulation.enableCommandAcks,onChange:z})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:"Should commands be acknowledgements be sent from the device?"}),"If this setting is turned off, no devices will send any acknowledgements for Direct methods or C2D commands."]})})})]})})]}),Object(h.jsxs)(f.f.Col,{children:[Object(h.jsx)("h6",{children:Object(h.jsx)(f.o,{className:"text-default small",children:Object(h.jsxs)("strong",{children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," "," Restart Starling to apply these changes."]})})}),Object(h.jsx)("h4",{children:"HTTP Settings"}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Administration Server Port Number",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"adminPort",value:r.http.adminPort,required:!0,type:"text",pattern:"[0-9]*",onChange:U,invalid:!!b.adminPort,feedback:"Administration Server Port Number (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"The port on which the Starling administration server is listening."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Metrics Port Number",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"metricsPort",value:r.http.metricsPort,required:!0,type:"text",pattern:"[0-9]*",onChange:U,invalid:!!b.metricsPort,feedback:"Metrics Port Number (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"The port on which the Starling publishes Prometheus metrics."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Prometheus Port Number",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"prometheusPort",value:r.http.prometheusPort,required:!0,type:"text",pattern:"[0-9]*",onChange:U,invalid:!!b.prometheusPort,feedback:"Prometheus Port Number (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"The port on which the Promethus server is listening."})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Grafana Port Number",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"grafanaPort",value:r.http.grafanaPort,required:!0,type:"text",pattern:"[0-9]*",onChange:U,invalid:!!b.grafanaPort,feedback:"Grafana Port Number (whole number) is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsx)(h.Fragment,{children:"The port on which the Grafana dashboard server is listening."})})})]})}),Object(h.jsx)("h4",{children:"Data Settings"}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Database Directory",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"path",value:r.data.path,required:!0,type:"text",pattern:"[0-9]*",onChange:function(e){var t=Object(H.a)(Object(H.a)({},r.data),{},Object(W.a)({},e.target.name,e.target.value)),n=Object(H.a)(Object(H.a)({},r),{},{data:t});c(n),T(!0),P(!1)},invalid:!!b.adminPort,feedback:"Database Directory is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:"The directory in which Starling stores its database."}),Object(h.jsxs)("p",{children:["By default it stores data in a ",Object(h.jsx)("strong",{children:"[Starling binary directory]/.db"})," directory."]}),"Use forward / instead of \\ in paths. E.g.: d:/starling/data"]})})})]})}),Object(h.jsx)("h4",{children:"Logger Settings"}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Logs Directory",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Input,{name:"logsDir",value:r.logger.logsDir,required:!0,type:"text",pattern:"[0-9]*",onChange:G,invalid:!!b.adminPort,feedback:"Logs Directory is required"})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:"The directory in which Starling stores log files."}),Object(h.jsxs)("p",{children:["Log files are automatically rotated every ",Object(h.jsx)("strong",{children:"30 days"})," or when it reaches ",Object(h.jsx)("strong",{children:"10MB"}),". Last ",Object(h.jsx)("strong",{children:"3"})," files are kept."]}),Object(h.jsxs)("p",{children:["By default it stores data in a ",Object(h.jsx)("strong",{children:"[Starling binary directory]/logs"})," directory."]}),"Use forward / instead of \\ in paths. E.g.: d:/starling/logs."]})})})]})}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Log Level",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsxs)(f.e.Select,{name:"logLevel",value:r.logger.logLevel,required:!0,onChange:G,invalid:!!b.logLevel,feedback:"Log Level is required",children:[Object(h.jsx)("option",{value:"panic",children:"Panic"}),Object(h.jsx)("option",{value:"fatal",children:"Fatal"}),Object(h.jsx)("option",{value:"error",children:"Error"}),Object(h.jsx)("option",{value:"warn",children:"Warning"}),Object(h.jsx)("option",{value:"info",children:"Information"}),Object(h.jsx)("option",{value:"debug",children:"Debug"}),Object(h.jsx)("option",{value:"trace",children:"Trace"})]})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["Starling produces runtime logs stored in its ",Object(h.jsx)("strong",{children:"Log Directory"}),". Select the appropriate log level."]}),"Leave this at ",Object(h.jsx)("strong",{children:"Debug"})," level as it produces useful information."]})})})]})}),Object(h.jsx)("h4",{children:"Data Generation"}),Object(h.jsx)(f.e.Group,{isRequired:!0,label:"Geopoint Data",children:Object(h.jsxs)(f.f.Row,{gutters:"xs",children:[Object(h.jsx)(f.f.Col,{children:Object(h.jsx)(f.e.Textarea,{name:"geopointData",value:r.simulation.geopointData,required:!0,onChange:function(e){var t=Object(H.a)(Object(H.a)({},r.simulation),{},Object(W.a)({},e.target.name,e.target.value)),n=Object(H.a)(Object(H.a)({},r),{},{simulation:t});c(n),S(!0),P(!1)},className:"geopointData",invalid:!!b.geopointData,feedback:"Geopoint Data is required",rows:15})}),Object(h.jsx)(f.f.Col,{auto:!0,className:"align-self-center",children:Object(h.jsx)(J,{content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:"These Geopoints data is used during simulating geopoint data types. All the points are sequentially used while sending telemetry messages containing geopoints. "}),Object(h.jsxs)("p",{children:["Format is a JSON array with three floating point numbers: ",Object(h.jsx)("strong",{children:"[latitude, longitude, altitude]"}),"."]}),"Default data is for a road around part of Microsoft campus in Redmond, WA, USA."]})})})]})})]})]})})]})]})})]})})}),ce=(n(103),function(){var e=Object(i.useContext)(O),t=Object(o.g)(),n=Object(i.useState)({grafanaStatus:!1,prometheusStatus:!1}),a=Object(u.a)(n,2),r=a[0],c=a[1],s=Object(i.useState)(""),l=Object(u.a)(s,2),b=l[0],m=l[1];Object(i.useEffect)((function(){e.initialized||e.initializeData(),e.metricsStatus&&(c(e.metricsStatus),m(""))}),[e.metricsStatus]);var p=function(){var n=Object(j.a)(d.a.mark((function n(i){var a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i.preventDefault(),n.prev=1,n.next=4,e.refreshMetricsStatus();case 4:a=n.sent,N("success","Success","Metrics status refreshed."),c(a),t.replace("/metrics"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),m(A(n.t0,"error refreshing metrics"));case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}(),x=Object(h.jsx)("span",{className:0===b.length?"text-green":"text-danger",children:0===b.length?"Healthy":"Not running"}),g=Object(h.jsx)("span",{className:r.prometheusServer?"text-green":"text-danger",children:r.prometheusServer?"Healthy":"Not running"}),v=Object(h.jsx)("span",{className:r.grafanaServer?"text-green":"text-danger",children:r.grafanaServer?"Healthy":"Not running"}),C="",w="",y=e.config?"http://localhost:"+e.config.http.metricsPort+"/metrics":"#",S=Object(h.jsxs)("div",{children:[Object(h.jsx)(f.h,{prefix:"fe",name:"external-link"})," ",Object(h.jsx)("a",{href:y,target:"_blank",rel:"noreferrer",children:"Raw Metrics"})]});if(r.prometheusServer){var I="#";e.config&&(I="http://localhost:"+e.config.http.prometheusPort),C=Object(h.jsxs)("div",{children:[Object(h.jsx)(f.h,{prefix:"fe",name:"external-link"})," ",Object(h.jsx)("a",{href:I,target:"_blank",rel:"noreferrer",children:"Dashboard"})]})}else C=Object(h.jsxs)("div",{children:[Object(h.jsx)(f.h,{prefix:"fe",name:"external-link"})," ",Object(h.jsx)("a",{href:"https://github.com/iot-for-all/starling/blob/main/README.md",target:"_blank",rel:"noreferrer",children:"Help me configure"})]});if(r.grafanaServer){var k="#";e.config&&(k="http://localhost:"+e.config.http.grafanaPort),w=Object(h.jsxs)("div",{children:[Object(h.jsx)(f.h,{prefix:"fe",name:"external-link"})," ",Object(h.jsx)("a",{href:k,target:"_blank",rel:"noreferrer",children:"Dashboard"})]})}else w=Object(h.jsxs)("div",{children:[Object(h.jsx)(f.h,{prefix:"fe",name:"external-link"})," ",Object(h.jsx)("a",{href:"https://github.com/iot-for-all/starling/blob/main/README.md",target:"_blank",rel:"noreferrer",children:"Help me configure"})]});return Object(h.jsx)(E,{children:Object(h.jsxs)(f.k.Content,{title:"Metrics",children:[b&&b.length>0&&Object(h.jsxs)("div",{className:"alert alert-danger",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"alert-triangle"})," ",b]}),Object(h.jsx)("form",{onSubmit:p,children:Object(h.jsxs)(f.b,{children:[Object(h.jsxs)(f.b.Header,{children:[Object(h.jsx)(f.b.Title,{children:"Data Flow"}),Object(h.jsx)(f.b.Options,{children:Object(h.jsx)("span",{title:"Refresh Metrics Status",children:Object(h.jsx)(f.a,{color:"primary",size:"sm",icon:"refresh-ccw",className:"ml-2",onClick:p,children:"Refresh"})})})]}),Object(h.jsxs)(f.b.Body,{children:[Object(h.jsx)("div",{className:"simLearnMore",children:Object(h.jsx)("p",{children:Object(h.jsxs)(f.o,{className:"text-default",children:[Object(h.jsx)(f.h,{prefix:"fe",name:"help-circle"})," "," ",Object(h.jsx)("a",{href:"https://github.com/iot-for-all/starling",target:"_blank",rel:"noreferrer",children:"Help me configure metrics pipeline"})]})})}),Object(h.jsx)("p",{children:"Starling publishes metrics through its metrics endpoint. You can configure Prometheus to scrape these metrics and store in its timeseries database. Grafana can be configured to show dashboards based on the data stored in Prometheus."}),Object(h.jsxs)("div",{className:"serverCardContainer",children:[Object(h.jsx)("div",{className:"serverCardItem",children:Object(h.jsx)(f.b,{className:"serverCard",children:Object(h.jsxs)(f.b.Body,{className:"text-center",children:[Object(h.jsx)(f.g,{size:2,children:"Starling"}),Object(h.jsxs)(f.g,{size:5,children:["Status: ",x]}),S]})})}),Object(h.jsxs)("div",{className:"serverCardArrow",children:[Object(h.jsx)("div",{children:Object(h.jsx)(f.o,{className:"arrowText",children:"Prometheus scrapes data from Starling"})}),Object(h.jsx)("span",{class:"arrow-right"})]}),Object(h.jsx)("div",{className:"serverCardItem",children:Object(h.jsx)(f.b,{className:"serverCard",children:Object(h.jsxs)(f.b.Body,{className:"text-center",children:[Object(h.jsx)("img",{className:"card-img-top",src:"./images/prometheusLogo.png",alt:"Prometheus"}),Object(h.jsxs)(f.g,{size:5,children:["Status: ",g]}),C]})})}),Object(h.jsxs)("div",{className:"serverCardArrow",children:[Object(h.jsx)("div",{children:Object(h.jsx)(f.o,{className:"arrowText",children:"Grafana queries data from Prometheus"})}),Object(h.jsx)("span",{class:"arrow-right"})]}),Object(h.jsx)("div",{className:"serverCardItem",children:Object(h.jsx)(f.b,{className:"serverCard",children:Object(h.jsxs)(f.b.Body,{className:"text-center",children:[Object(h.jsx)("img",{className:"card-img-top",src:"./images/grafanaLogo.jpg",alt:"Grafana"}),Object(h.jsxs)(f.g,{size:5,children:["Status: ",v]}),w]})})})]})]})]})})]})})}),se=function(e){return Object(h.jsx)(f.d,{})};var oe=function(){return Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(s.a,{children:Object(h.jsx)(x,{children:Object(h.jsxs)(o.d,{children:[Object(h.jsx)(o.b,{exact:!0,path:"/",component:U}),Object(h.jsx)(o.b,{exact:!0,path:"/app",component:L}),Object(h.jsx)(o.b,{exact:!0,path:"/app/:id",component:$}),Object(h.jsx)(o.b,{exact:!0,path:"/model",component:X}),Object(h.jsx)(o.b,{exact:!0,path:"/model/:id",component:ee}),Object(h.jsx)(o.b,{exact:!0,path:"/sim",component:te}),Object(h.jsx)(o.b,{exact:!0,path:"/sim/:id",component:ae}),Object(h.jsx)(o.b,{exact:!0,path:"/settings",component:re}),Object(h.jsx)(o.b,{exact:!0,path:"/metrics",component:ce}),Object(h.jsx)(o.b,{component:se})]})})})})},le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,108)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))};c.a.render(Object(h.jsxs)(a.a.StrictMode,{children:[Object(h.jsx)(S.a,{}),Object(h.jsx)(oe,{})]}),document.getElementById("root")),le()},35:function(e,t,n){},41:function(e,t,n){},50:function(e,t,n){},71:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.3840fefc.chunk.js.map