## Starling - Frequently Asked Questions ##

### 1. Are there other Azure IoT device simulators? What is the difference between them? ###
There a few device simulators that are available, each with their own purpose.

Simulator                        | Purpose
---------------------------------|---------------------------------------------------------------------------------
[Mock Devices](https://github.com/codetunez/mock-devices) | This can be used to simulate devices and interactively send data from devices. This can be used while developing and debugging device models.
[Starling](https://github.com/iot-for-all/starling) | This can be used to scale test your IoT solution by simulating thousands of devices and measure performance from the client perspective. This can also be used to generate datat for downstream analytics systems. 
[Azure IoT Device Simulation](https://github.com/Azure/azure-iot-pcs-device-simulation) | This is deprecated and no longer maintained.

### 2. Can I run simulations against multiple apps at the same time? ###
Yes, you can simultaneously run multiple simulations against same application or multiple applications.
They can be independently started and stopped. E.g.: If your application have some slow devices, and some fast devices,
you can configure a simulation with devices sending telemetry frequently, and another simulation with devices sending
telemetry less frequently. Start both simulations at the same time. 

### 3. What are the limitations of Starling? ###
Starling has the following limitations:
1. **Modeling:** Starling simulates a device based on the device capability model. The DCM parser in Starling
   is basic and has the following limitations:
    1. Supported data types: boolean, date, datetime, double, duration, float, geopoint, integer, long, string, time
    2. Unsupported data types or schemas:  enum, map, object, vector, array, hashmaps, event, state
    3. Interfaces are supported. Components are not supported
    4. Direct methods are acknowledged. They currently do not return any data.
    5. C2D commands are not "completed" or return any data as response.
2. **Data Generation:** Data generated by a simulated device is random. You can implement custom behaviors by
   modifying dataGenerator.
3. **Number of devices:** Each simulated device opens several ports for MQTT protocol. Starling can simulate tens of
   thousands of devices. This number may vary based on your operating system network port limits,
   CPU and memory configurations of your host. You should be able to simulate about **10,000** devices on a typical
   Windows 10 desktop. 
4. **Throttling:** Simple throttling is implemented across the simulator. When errors occur, throttling is not
   applied during reconnects. There are not exponential backoff strategies during error recovery.
5. **Data rates:** Telemetry rates can be pushed higher based on the network bandwidth, and the message send latency.
   When simulation starts falling behind i.e. message are generated at faster rates that it is able to send, you will
   notice telemetry batches skipped or reported property updates skipped in the dashboard. 
   
### 4. How can I look at the device side errors? ###
Starling prints all logs to the console window and writes them to the log file `logs/starling.log`.
You can change the *Log Level* in the *Settings* tab and restart the Starling server for applying changes. 

### 5. Can I simulate devices in my PaaS solution? ###
Starling is optimized for IoT Central. However, you can use it to simulate devices connecting to your own Azure IoT Hub.
Follow these steps to connect Starling to your PaaS solution.
1. Create a Device Provisioning Service (DPS) and link it to your Azure Iot Hub.
2. Add a new application with the following values:

Parameter                 | Value                                 | Description
--------------------------|---------------------------------------|-------------------
Name                      | My app                                | Some name for your application
Application URL           | myapp                                 | Some dummy url, does not have to be a valid url
Device Provisioning URL   | global.azure-devices-provisioning.net | For all DPSs in public could, use this endpoint
ID Scope                  | `<YOUR_DPS_ID_SCOPE>`                 | Enter your ID Scope from your DPS
Device Connection SAS Key | `<YOUR_DPS_SAS_KEY>`                  | DPS Shared access key with enrollment and registration read/write access
Automatically import all device models for this application | Unchecked | Since this is not a Central application, there is no way to import device models automatically

3. Add device models in the *models* tab. You can use [brewer.json](./brewer.json) and [drone.json](./drone.json) sample models.
4. Configure and run a simulation.
5. Limitations:
   * Provisioned device count cannot be decreased. Devices are not deleted when simulation is deleted as it uses
   IoT Central APIs to delete them. You can however delete them directly from IoT Hub/DPS.
   * Device models cannot be imported.

[Back to contents](../README.md)| Previous: [Setting up metrics collection and dashboards](metrics.md)
---------------------------------|----------------------------

